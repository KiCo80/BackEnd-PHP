404.php FILE:


<h2>404 - Hibaoldal</h2>

<img src='404.png'>




adbkapcsolat.php FILE:


<?php

    $adb=mysqli_connect("localhost", "root", "", "encegem");
	
    $ip=$_SERVER['REMOTE_ADDR'];

?>




elerhetoseg.php FILE:


<h2>El√©rhet≈ës√©g</h2>

<iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d10798.394750420175!2d19.04909443446149!3d47.41976836676121!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1shu!2shu!4v1645548725212!5m2!1shu!2shu" 
width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>




index.php FILE:


<?php
	session_start(); // ezzel jelezz√ºk a server fel√©, h tartsa nyilv√°n a munkamenet√ºnket.
	
	$session=session_id();

	//print session_id(); // ezzel ki√≠rathatjuk a session azonos√≠t√≥nkat.
	
	include("adbkapcsolat.php");

	mysqli_query($adb, "
		INSERT INTO latogatok (lid, ldatum,   lip,   lsession, loldal)
		VALUES               (NULL,  NOW(), '$ip', '$session', '$_SERVER[REQUEST_URI]')
	
	");


?>

<!DOCTYPE html>
<html>
	<head>
	
	</head>

	<style> /* CSS fel√ºletet hozunk l√©tre a form√°z√°shoz */
		
		body{
			margin: 0; /* ezzel a div-ek felker√ºltek teljesen a bal fels≈ë sarokba */
		}

		div{
			border: solid 1px grey;
			padding: 12px;
		}	
		div#cimsor{
			background-color: #888;
			color: white;
		}
		div#menu, div#lablec{
			background-color: #AAA;
			color: #FFF;
			padding: 0 36px;
		}
		div#menu a{
			/* display: block;  ezzel egym√°s alatt lesznek a men√ºpontok  */
			display: inline-block;
			width: 120px;
			text-align: center;
			font-weight: bold;
			text-decoration: none;
			color: #FFF;
			padding: 12px;
		}
		div#menu a:hover{
			background-color: #FFF;
			color		: #888;
		}



	</style>

	<body>

		<div id="cimsor">
			<h1>Komoly weboldal :)</h1>
		</div>

		<div id="menu">
			<a href='./?p=aktual'>Aktualit√°sok / Akci√≥k</a>
			<a href='./?p=szolg'>Szolg√°ltat√°sok</a>
			<a href='./?p=ref'>Referenci√°k</a>
			<a href='./?p=gal'>Gal√©ria</a>
			<a href='./?p=eler'>El√©rhet≈ës√©geink</a>
			<a href='./?p=kapcs'>Kapcsolat</a>
			<a href='./?p=vendegkonyv'>Vend√©gk√∂nyv</a>
			
		</div>

		<div id="tartalom">
<?php
	if (isset($_GET['p']))	$p=$_GET['p'];
	else			$p="";	

	if ($p=="")		print "<h2>F≈ëoldal</h2>";
	else
	if ($p=="aktual")	print "<h2>Aktu√°lis akci√≥ink</h2>"; 
	else
	if ($p=="szolg")	print "<h2>Szolg√°ltat√°saink</h2>";
	else
	if ($p=="ref")		print "<h2>Referenci√°k</h2>";
	else
	if ($p=="gal")		print "<h2>Gal√©ria</h2>";
	else
	if ($p=="eler")		include("elerhetoseg.php");
	else
	if ($p=="kapcs")	include("kapcsolat.php");
	else
	if ($p=="vendegkonyv")	include("vendegkonyv.php");
	else			include("404.php"); /* ezzel h√≠vjuk meg a 404.php file-t, amit √≠rtunk, az tartalmazza a k√©pet */


			
?>

		<iframe name='kisablak'></iframe>

		</div>

<?php

	date_default_timezone_set("Europe/Budapest");

	$filenev=date("ymd").".txt"; // ez lesz a file neve, kihagyhatjuk a k√∂t≈ëjelet is, mert ez nem megjelen√≠tend≈ë d√°tum.

	if (file_exists($filenev)){
		$fp=fopen("$filenev", "r"); // logikai file-t hozunk l√©tre $fp n√©ven, amit olvasni szeretn√©nk
		$n=fread($fp, filesize($filenev)); // fp = file pointer - megnyitjuk olvas√°sra, m√°r a fizikai file-t.
		fclose($fp);
	}
	else{
		$fp=fopen("$filenev", "w"); 
		$n=fwrite($fp, 0);
		fclose($fp);
		$n=0;
	}

	if (!isset($_SESSION['teljesenmindegy'])){ // megn√©zz√ºk, hogy van-e benne ilyen kifejez√©s
	$n++; // $n √©rt√©k√©t mindig megn√∂velj√ºk egyel

	$fp=fopen("$filenev", "w"); 
		$n=fwrite($fp, $n);
		fclose($fp);

		$_SESSION['teljesenmindegy']='elnezestkerekhazakellmennem'; // v√°ltoz√≥ egyenl≈ë valamivel :)))
	}
	
	print "Az oldalt $n l√°togat√≥ l√°tta ma.";

?>

		<div id="lablec">
			&copy; kico.hu, 2001-<?=@date("Y-m-d H:i:s");?>	<!-- Speci√°lis karakter megjelen√≠t√©se "&"-del kezd≈ëdik √©s ";"-vel v√©gz≈ëdik, k√∂zt√ºk a megjelen√≠tend≈ë karakter k√≥dja. -->
		</div>					<!-- Ha gyorsan kell php k√≥dot √≠rni egy sorba, akkor: "<?=2022;?>" - itt a 2022 hely√©re megy a date() f√ºggv√©ny. Mivel a date() f√ºggv√©ny kimeneteli √©rt√©ke string, ez√©rt z√°r√≥jelen bel√ºl id≈ëz≈ëjelek k√∂z√© tessz√ºk a form√°tum param√©tereit -->
	
	</body>

</html>

<?php
	mysqli_close($adb);
?>




kapcsolat.php FILE:


<h2>√çrj nek√ºnk!</h2>

<form action='uzenetir.php' method='post' target='kisablak'>  <!-- kell egy uzenetir.php file-t csin√°lni -->

<!-- a method alapb√≥l = "get"-tel, de ez nem j√≥, mert akkor a c√≠msorban l√°that√≥ak az adatok. A "post" √©rt√©k miatt nem lesz l√°that√≥ a c√≠msorban -->

Az email c√≠med:	<input type='email' name='mailcim'><br>
√úzenet t√©m√°ja:	<input type='text' name='targy'><br>
√úzenet sz√∂vege:	<textarea name='szoveg'></textarea><br><br> <!-- textarea - t√∂bb soros sz√∂vegbeviteli mez≈ë -->

<input type='submit' value='√úzenet k√ºld√©se'>

</form>





uzenetir.php FILE:


<pre>				<!-- megjelen√≠ti a sort√∂r√©seket -->
<?php

	print_r($_POST); 	/* a form mez≈ëinek √©rt√©k√©t l√°tjuk */
	
	mail('ugyfelszolgalat@encegem.hu', $_POST['targy'], $_POST['szoveg'], "From".$_POST['mailcim']);			/* mail f√ºggv√©nnyel tudunk emailt k√ºldeni, ha a server√ºnk kezel mailt. */
				/*  A "From"-hoz konkaten√°ljuk a mailc√≠met. */				
	
/* EMAIL K√úLD√âS√âNEK FELT√âTELEI? HOGY NE MENJENEK KI √úRES EMAILEK: */
	
	if($_POST['mailcim']=="")	die("<script> alert('Nem adtad meg az email c√≠medet!')</script>");  /* die = olyan, mint a print, csak nem engedi tov√°bb futni a programot.*/
	
/* ugyanezt tehetj√ºk a t√∂bbi param√©terrel: t√°rgy, sz√∂veg, stb... */
	
	if($_POST['targy']=="")		die("<script> alert('Nincs t√°rgy!')</script>");
	
	if (strlen($_POST['szoveg'])<40) die("<script> alert('Kicsit hosszabbat √≠rj!')</script>");  /* strlen = √ºzenet sz√∂veg√©nek hossza, jelen esetben <40 */

/* mail (); f√ºggv√©ny - 5 param√©tere van, ebb≈ël 3 k√∂telez≈ë => php manual => mail(), minden ott van r√≥la */

/*
	mail("hr@encegem.hu",
	     $_POST['targy'],
	     $_POST['szoveg'],
	     "From:".$_POST['mailcim']);  // mehetne egy sorba is, de t√∂rdelve jobban l√°tjuk a f√ºggv√©ny param√©tereit.

	mail($_POST['mailcim'],    // √≠gy a felhaszn√°l√≥nak is elk√ºldj√ºk az √ºzenetet, tudni fogja, hogy mit √≠rt. 
	     "M√ÅSOLAT - ".$_POST['targy'],
	     $_POST['szoveg'],
	     "From:".$_POST['mailcim']);
*/

/* FENTI M√ìDON NEM SZABAD EMAILT K√úLDENI, MERT HAMAR MEGTELIK A SERVER!!! */
/* EZ√âRT (V√ÅR√ìLIST√ÅRA) ADATB√ÅZISBA KELL BELETENNI AZ EMAILEKET! */	


/* ADATB√ÅZISOS R√âSZ: PHP manualban: 5 param√©ter. A 2. a felhaszn√°l√≥n√©v, a 3. a jelsz√≥, itt √ºres*/
	
	$adb=mysqli_connect("localhost", "root", "", "encegem"); /* $adb v√°ltoz√≥ba t√°roljuk el a kapcsol√≥d√°s eredm√©ny√©t. */
	
	$ip=$_SERVER['REMOTE_ADDR']; // √≠gy k√©rdezz√ºk le az ip c√≠met, be is tessz√ºk v√°ltoz√≥ba

	include("adbkapcsolat.php");

	
	mysqli_query($adb, "
	
			INSERT INTO emailek (eid,            efelado,          etargy,          eszoveg, eidopont,   eip, estatusz, ekomment) 
			VALUES 		    (NULL, '$_POST[mailcim]', '$_POST[targy]', '$_POST[szoveg]',    NOW(), '$ip',       '',       '')
			
	 ");
	/*
	Fent: ezt az adatb√°zis fel√ºletr≈ël, a besz√∫r√°s f√ºln√©l √ºresen hagyva, majd ment√©s, √©s ki√≠rja a parancsot, amit bem√°solunk a php-be. CTRL+H-val kicser√©lj√ºk √ºresre ezeket a d≈ëlt aposztr√≥fokat. Az√©rt tessz√ºk egym√°s al√° a vessz≈ëket, hogy l√°ssuk, mi, mihez tartozik. A mailcim el≈ëtti √©s ut√°ni aposztr√≥fokat kivessz√ºk, mert aposztr√≥f k√∂z√© √≠rtuk be!
	fenti k√©t sort kim√°soljuk, beillesztj√ºk a MySQL-be. Ha z√∂ld, akkor j√≥! Ut√°na M≈±veletek => Truncate - kit√∂r√∂l √©s lenull√°z mindent.
	*/
	
	mysqli_close($adb);




	print " 
		<script>
			alert('K√∂sz√∂nj√ºk √ºzenetedet!')
			parent.location.href='./' /* ezzel visszaugrunk a f≈ëoldalra, a sz√ºl≈ëoldalra. */
		</script>
	";

?>
</pre>


<!-- szerv√≠z funkci√≥ miatt nagyon hasznos, mindig √≠gy kell kezdeni!!! -->





vendegkonyv.php FILE:


<!DOCTYPE html>
<head>
</head>

<style>
    div.uzenet{
        border:             solid 1px #004;
        border-radius:      3px;
        background-color:   #DDF;
        color:              #004;
        margin:             16px;
        padding:            6px 12px;
    }

    div.uzenet span{
        float:              right;
    }

    div.uzenet hr{
        border-top:             dotted 1px #004;
    }

</style>

<body>
    
    <form action='vendegkonyv_ir.php' method='post'       target='kisablak' style='margin-left:120px;'> 
    
        <h2>Vend√©gk√∂nyv</h2>

        Neved:<br>
        <input type='text' name='nev' size=32><br><br>
        √úzeneted:<br> 
        <textarea name='szoveg' rows=8 cols=40></textarea><br><br> 

        <input type='submit' value='K√ºld√©s'>

    </form>

<hr style='margin:24px 0;'>

<?php

    $tomb=[]; 

    $fp=fopen("vendegkonyv.txt", "r");
    while($sz=fgets($fp)) 
    {
        $tomb[]=$sz;
    }
    fclose($fp);
    
    $sorszam=count($tomb);

    for($i=count($tomb)-1; $i>=0; $i--) 

    {        
        $sz=str_replace("\r\n", "<br>", $tomb[$i]); 

        $sor=explode(";" , $sz); 

        $sor[2]=str_replace("\\r\\n", "<br>", $sor[2]); // megk√©rdezni Tan√°r √ört√≥l a <br>-t, mert a replace miatt azt is ki√≠rja, nem pedig sort√∂r√©st csin√°l...
        $sor[2]=str_replace(":)", "üòä", $sor[2]);
        $sor[2]=str_replace(":D", "üòÅ", $sor[2]);
        $sor[2]=str_replace(":P", "üòã", $sor[2]);
        $sor[2]=str_replace(";$", "ü•¥", $sor[2]);
        $sor[2]=str_replace(":(", "üôÅ", $sor[2]);
        $sor[2]=str_replace("B-)", "üòé", $sor[2]);
        $sor[2]=str_replace(":'(", "üò≠", $sor[2]);
        $sor[2]=str_replace(":-*", "üòò", $sor[2]);
        $sor[2]=str_replace("<3", "‚ù§", $sor[2]);
        $sor[2]=str_replace( "<" , "&lt;" , $sor[2]);
        //$sor[2]=str_replace( ">" , "&gt;" , $sor[2]);
        $sor[2]=str_replace( "'" , "\'" , $sor[2]);
       
        
        print "<div class='uzenet'> $sorszam."." <br> <span> $sor[0]</span> $sor[1] <hr> $sor[2] </div>";
        $sorszam--;
    }
       
?>

</body>
</html>
<pre>				

    
// marque: jobbr√≥l balra √°t√∫szik a tartalom :) - hack :)
    

			




vendegkonyv_ir.php FILE:


<pre>				
<?php

    print_r($_POST); // ezzel ki√≠ratjuk a "kisablak"-ba az adatokat.
    
    if(!file_exists("vendegkonyv.txt")){
        $fp=fopen("vendegkonyv.txt", "w");
        fclose($fp);
    }
    
    if($_POST['nev']=="")       die("<script> alert('K√©rlek, add meg a neved!') </script>");

    if(strlen($_POST['szoveg'])<4)    die("<script> alert('K√©rlek, hosszabb √ºzenetet √≠rj!') </script>"); // megvizsg√°ljuk, hogy megvan-e minimum a 4 karakter hossz√∫s√°g√∫ √ºzenetsz√∂veg.

    $uzenet=str_replace("\r\n", "\\r\\n", $_POST['szoveg']); // str_replace: lecser√©lni karaktereket m√°sra. 3 param√©tere van: mit, mire, miben. \n\r = Enter jele

    $beirando=date("y-m-d- H:i:s").";".$_POST['nev'].";".$uzenet. "\r\n"; // 3 adatot √≠runk bele, egym√°st√≥l ";"-vel elv√°lasztva. A \n\r-rel (Enterrel) z√°rjuk le az √ºzenetet.
    
    $fp=fopen("vendegkonyv.txt", "a"); // "a"-val hozz√°f≈±z√ºnk a file-unk tartalm√°hoz.
    fwrite($fp, $beirando);
    fclose($fp);

    print "<script> alert('K√∂sz√∂nj√ºk √ºzenetedet!') 
            parent.location.href = parent.location.href
            </script>";
    // parent.location.href-fel oldalt friss√≠t√ºnk a vend√©gk√∂nyvbe √≠r√°s ut√°n

?>
</pre>




ADMIN MAPPA FILE-JAI:

emailek.php FILE:


<style>
    table{
        background-color: lightgreen;
        border: 1px solid black;
        border-collapse: collapse;
    }
    th{
        padding: 5px;
    }
    td{
        padding: 2px;
    }
</style>

<?php

    print("<table border=1>");
    print("<th>Id≈ëpont</th>");
    print("<th>Felad√≥</th>");
    print("<th>T√°rgy</th>");
    print("<th>√úzenet sz√∂vege</th>");

	$adb=mysqli_connect("localhost", "root", "", "encegem");
	
	$tabla=mysqli_query($adb, " SELECT * FROM emailek ORDER BY eidopont DESC");

    //$sor=mysqli_fetch_array($tabla);    

    while($sor = mysqli_fetch_array ($tabla)) 
	{
	
    print ("<tr>");
    print ("<td><b>$sor[eidopont]</b></td>");
    print ("<td><b>$sor[efelado]</b></td>");
    print("<td><u>$sor[etargy]</u></td>");
    print("<td><b>$sor[eszoveg]</b></td>");
    print ("</tr>");
 
	}

	mysqli_close($adb);

?>




index.php FILE:


<!DOCTYPE html>
<html>
<head>
</head>
    
<style>
		
		body{
			margin: 0; 
		}

		div{
			padding: 12px;
		}	
		div#cimsor{
			background-color: #888;
			color: lime;
		}
		div#menu, div#lablec{
			background-color: #AAA;
			color: white;
			padding: 0 36px;
		}
		div#menu a{
			display: inline-block;
			width: 120px;
			text-align: center;
			font-weight: bold;
			text-decoration: none;
			color: lightgreen;
			padding: 12px;
		}
		div#menu a:hover{
			background-color: lightgreen;
			color		: #888;
		}

    </style>

<body>
    <div id="cimsor">
        <h2>Admin fel√ºlet</h2>
    </div>

    <div id="menu">
			<a href='./?p=emailek'>Emailek</a>
			<a href='./?p=latogatottsag'>L√°togatotts√°g</a>
	</div>

    <div id="tartalom">

    <?php
	    if (isset($_GET['p']))	    $p=$_GET['p'];
	    else			            $p="";	
        if ($p=="") 		        print "";
	    else
	    if ($p=="emailek")	        include("emailek.php"); 
	    else
	    if ($p=="latogatottsag")    include("latogatottsag.php");
	    else			            include("404.php"); 		
    ?>

    </div>
</body>

</html>




latogatottsag.php FILE:


<?php

	date_default_timezone_set("Europe/Budapest");

	$filenev=date("ymd").".txt"; 

	if (file_exists($filenev)){
		$fp=fopen("$filenev", "r");
		$n=fread($fp, filesize($filenev));
		fclose($fp);
	}
	else{
		$fp=fopen("$filenev", "w"); 
		$n=fwrite($fp, 0);
		fclose($fp);
		$n=0;
	}

	if (!isset($_SESSION['teljesenmindegy'])){
		$n++; 

		$fp=fopen("$filenev", "w"); 
			$n=fwrite($fp, $n);
			fclose($fp);

			$_SESSION['teljesenmindegy']='elnezestkerekhazakellmennem'; 
	}
	
	print "Az oldalt $n l√°togat√≥ l√°tta ma.";

?>
